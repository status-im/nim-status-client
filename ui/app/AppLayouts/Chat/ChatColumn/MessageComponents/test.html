<html>
    <head>
        <script>
            window.pluginOnMessage = function(_message) {
                let message
                if (typeof _message === "string") {
                    try {
                        message = JSON.parse(_message)
                    } catch (e) {
                        alert ('Error parsing message ' + e)
                        return
                    }
                } else {
                    message = _message
                }
                
                
                if (message.data === "red") {
                    document.getElementsByClassName("mybutton")[0].style.backgroundColor = "red";
                }
                if (message.data === "blue") {
                    document.getElementsByClassName("mybutton")[0].style.backgroundColor = "blue";
                }
            }
            window.pluginOnAllMessages = function(messages) {
                try {
                    const messagesJSON = JSON.parse(messages)
                    // Only send the last one
                    pluginOnMessage(messagesJSON[messagesJSON.length - 1])
                } catch (e) {
                    alert ('Error parsing messages ' + e)
                    return
                }
            }
        </script>
    </head>
        <button class="mybutton" onClick="javascript:hello()">hello</button>
        <button class="mybutton" onClick="javascript:toColor('red')">change to red</button>
        <button class="mybutton" onClick="javascript:toColor('blue')">change to blue</button>
    </body>
</html>